<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:py="http://genshi.edgewall.org/" 
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:doap="http://usefulinc.com/ns/doap"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  py:strip=""
  >

<!-- ! insert IE stylesheet (base templates don't do this correctly) -->
  <py:match path="//link[@rel='stylesheet']">
      ${select('.*')} 
   <!--[if IE]>
    <link rel="stylesheet" href="/css/ie.css" type="text/css" media="screen, print" />
   <![endif]-->
 </py:match>

<!-- ! workaround bug in current release (due to be fixed soon) -->
  <py:match path="//body">
    <body class="${value_of('body_class', default=c.body_class)}">
      ${select('child::.')}
    </body>
  </py:match>

<!-- ! remove extra filtering guff on main package search page (also due to be removed in a release soon) -->
  <py:match path="//form[@id='package-search']//div[@class='package-search-filters']">
    <div>
      <input type="submit" value="${_('Search')}" class="button" />
     <br />
    </div>    
  </py:match>

<!-- ! our custom primary nav -->
  <py:match path="//div[@class='menu']">
    <div class="menu">
      <ul>
        <li>${h.nav_link(c, _('Home'), controller='home', action='index', id=None)}
      </li>
      <li>${h.nav_link(c, _('Data'), controller='package', action='index', id=None)}
      </li>
    </ul>
    </div>
  </py:match>

<!-- make a really big search box in the top bar -->
  <py:match path="//div[@id='top-bar']/div[@class='search-form']">
    <div class="search-form">
        <form action="${url(controller='package', action='search')}" method="GET">
          <input type="search" class="search" name="q" value="" autocomplete="off" results="5" placeholder="What are you looking for?"  id="bigsearch"  />
	  <input type="submit" class="searchbutton" name="search" value="search" />
        </form>
    </div>
  </py:match>
  
<!-- ! custom footer links (the target pages should come from Wordpress via the wordpresser extension -->
  <py:match path="//div[@id='footer']">
    <div id="colophon">
      <div id="footer-widget-area" role="complementary">

        <div id="first" class="widget-area">
          <ul class="xoxo">
            <li class="widget-container widget_text">
            <div class="textwidget">
              <ul>
                <li>
                  <a href="/privacy/">privacy</a>
                </li>
                <li>
                  <a href="/code-of-conduct/">code of conduct</a>
                </li>
                <li>
                  <a href="/accessibility/">accessibility</a>
                </li>
                <li>
                  <a href="/terms-licence/">terms / licence</a>
                </li>
                <li>
                  <a href="/faqs/">faqs</a>
                </li>
                <li>
                  <a href="/contact-us/">contact us</a>
                </li>
              </ul>
            </div>
            </li>
          </ul>
        </div><!-- #first .widget-area -->
      </div>
    </div>
  </py:match>
  <xi:include href="layout_base.html" />
</html>
