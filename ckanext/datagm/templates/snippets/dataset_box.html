{#
Displays a list of datasets in a box with a title.

title    - the title for the box
datasets - the list of datasets to display

Example:

  {% snippet 'snippets/dataset_box.html', title='Popular datasets', datasets=h.popular_datasets() %}

#}
<div class="span6">
  <div class="box">
    <section class="group-list module module-narrow module-shallow">
      <header class="module-heading media">
        <div class="media-content">
          <h3 class="media-heading">
            {{ title }}
          </h3>
        </div>
      </header>
      <ul class="dataset-list unstyled">
        {% for dataset in datasets  %}
          {% set url=h.url_for(controller='package', action='read', id=dataset.name) %}
          <li class="dataset-item module-content">
            <div class="dataset-content">
              <h3 class="dataset-heading">
                <a href="{{ url }}">{{ dataset.title }}</a>
              </h3>
              {% if dataset.description %}
                {% if truncate == 0 %}
                  <p>{{ h.markdown_extract(dataset.description)|urlize }}</p>
                {% else %}
                  <p>{{ h.markdown_extract(dataset.description, truncate)|urlize }}</p>
                {% endif %}
              {% else %}
                <p class="empty">{{ _('There is no description for this dataset') }}</p>
              {% endif %}
              {% if dataset.num_resources == 1 %}
                <p>({{ dataset.num_resources }} resource)</p>
              {% else %}
                <p>({{ dataset.num_resources }} resources)</p>
              {% endif %}
            </div>
          </li>
        {% endfor %}
      </ul>
    </section>
  </div>
</div>

